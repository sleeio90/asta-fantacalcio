<div class="admin-settings-container">
  <div class="settings-header">
    <div class="header-content">
      <div class="title-section">
        <h2>
          <i class="fas fa-cog"></i>
          Configurazioni Applicazione
        </h2>
        <p class="text-muted">Gestisci le impostazioni globali dell'applicazione</p>
      </div>
      <div class="header-actions">
        <button type="button" class="btn btn-outline-primary" (click)="goToDashboard()">
          <i class="fas fa-arrow-left"></i>
          Torna alla Dashboard
        </button>
      </div>
    </div>
  </div>

  <div class="settings-content" *ngIf="!isLoading; else loadingTemplate">
    <form [formGroup]="configForm" (ngSubmit)="onSave()">
      
      <!-- Sezione Autenticazione -->
      <div class="settings-section">
        <h4>
          <i class="fas fa-shield-alt"></i>
          Autenticazione
        </h4>
        
        <div class="form-group">
          <div class="form-check form-switch">
            <input 
              class="form-check-input" 
              type="checkbox" 
              id="requireEmailVerification"
              formControlName="requireEmailVerification">
            <label class="form-check-label" for="requireEmailVerification">
              <strong>Richiedi verifica email</strong>
            </label>
          </div>
          <small class="form-text text-muted">
            Se abilitato, gli utenti dovranno verificare la propria email prima di poter accedere all'applicazione.
          </small>
          
          <div class="alert alert-info mt-2" *ngIf="requireEmailVerification?.value">
            <i class="fas fa-info-circle"></i>
            <strong>Verifica email abilitata:</strong> I nuovi utenti riceveranno un'email di verifica e dovranno confermare il proprio indirizzo email prima di poter utilizzare l'applicazione.
          </div>
          
          <div class="alert alert-warning mt-2" *ngIf="!requireEmailVerification?.value">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>Verifica email disabilitata:</strong> Gli utenti potranno accedere immediatamente senza verificare l'email. Questo potrebbe comportare rischi di sicurezza.
          </div>
        </div>
      </div>

      <!-- Sezione Aste -->
      <div class="settings-section">
        <h4>
          <i class="fas fa-gavel"></i>
          Aste
        </h4>
        
        <div class="form-group">
          <label for="maxParticipantsPerAuction">
            <strong>Numero massimo partecipanti per asta</strong>
          </label>
          <input 
            type="number" 
            class="form-control" 
            id="maxParticipantsPerAuction"
            formControlName="maxParticipantsPerAuction"
            min="2" 
            max="50">
          <small class="form-text text-muted">
            Definisce il numero massimo di partecipanti che possono unirsi a un'asta.
          </small>
        </div>
      </div>

      <!-- Sezione Notifiche -->
      <div class="settings-section">
        <h4>
          <i class="fas fa-bell"></i>
          Notifiche
        </h4>
        
        <div class="form-group">
          <div class="form-check form-switch">
            <input 
              class="form-check-input" 
              type="checkbox" 
              id="enableNotifications"
              formControlName="enableNotifications">
            <label class="form-check-label" for="enableNotifications">
              <strong>Abilita notifiche</strong>
            </label>
          </div>
          <small class="form-text text-muted">
            Se abilitato, gli utenti riceveranno notifiche per eventi importanti nell'applicazione.
          </small>
        </div>
      </div>

      <!-- Pulsanti di azione -->
      <div class="settings-actions">
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="!configForm.valid || isSaving">
          <span *ngIf="isSaving" class="spinner-border spinner-border-sm me-2"></span>
          <i class="fas fa-save" *ngIf="!isSaving"></i>
          {{ isSaving ? 'Salvataggio...' : 'Salva Configurazioni' }}
        </button>
        
        <button 
          type="button" 
          class="btn btn-outline-secondary ms-2"
          (click)="onResetToDefaults()"
          [disabled]="isSaving">
          <i class="fas fa-undo"></i>
          Reset Default
        </button>
      </div>
    </form>
  </div>

  <!-- Template di caricamento -->
  <ng-template #loadingTemplate>
    <div class="text-center p-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Caricamento...</span>
      </div>
      <p class="mt-3">Caricamento configurazioni...</p>
    </div>
  </ng-template>
</div>
