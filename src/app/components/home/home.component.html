<div class="container" *ngIf="user$ | async as user">
  <!-- Admin Welcome Message -->
  <mat-card class="admin-welcome" *ngIf="user.role === 'admin'">
    <mat-card-content>
      <div class="welcome-content">
        <mat-icon class="admin-icon">admin_panel_settings</mat-icon>
        <div>
          <h2>Benvenuto, {{ user.displayName || user.email }}!</h2>
          <p>Sei connesso come <strong>Amministratore</strong>. Hai accesso completo alla gestione dei calciatori e delle aste.</p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Player Welcome Message -->
  <mat-card class="player-welcome" *ngIf="user.role === 'player'">
    <mat-card-content>
      <div class="welcome-content">
        <mat-icon class="player-icon">person</mat-icon>
        <div>
          <h2>Benvenuto, {{ user.displayName || user.email }}!</h2>
          <p>Sei connesso come <strong>Giocatore</strong>. Puoi unirti alle aste utilizzando il codice invito fornito dall'amministratore.</p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- SEZIONE AMMINISTRATORE -->
  <div *ngIf="user.role === 'admin'">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Gestione Asta Fantacalcio - Pannello Amministratore</mat-card-title>
        <mat-card-subtitle>Crea e gestisci le tue aste fantacalcio</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="row mb-4">
          <div class="col-12">
            <h3>Istruzioni per Amministratori</h3>
            <p class="instructions-text">
              Come amministratore, hai il controllo completo sulla gestione delle aste fantacalcio.
              I giocatori potranno iscriversi alle tue aste utilizzando i codici invito che genererai.
            </p>
            <ol class="instructions-list">
              <li>Crea una nuova asta specificando nome, numero di partecipanti e crediti per partecipante</li>
              <li>Condividi il codice invito generato automaticamente con i giocatori</li>
              <li>Gestisci le tue aste: attiva/disattiva o elimina</li>
              <li>Avvia l'assegnazione dei calciatori quando tutti i partecipanti si sono iscritti</li>
            </ol>
          </div>
        </div>

        <app-admin-auction-manager (auctionSelected)="onAuctionSelected($event)"></app-admin-auction-manager>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- SEZIONE GIOCATORE -->
  <div *ngIf="user.role === 'player'">
    <!-- Dettaglio dell'asta del giocatore -->
    <app-player-auction-detail></app-player-auction-detail>

    <!-- Pannello espandibile per unirsi a un'asta -->
    <mat-expansion-panel class="join-auction-panel" [expanded]="false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <div class="expansion-title">
            <mat-icon>add_circle_outline</mat-icon>
            <span class="title-text">Unisciti a una Nuova Asta</span>
          </div>
        </mat-panel-title>
        <mat-panel-description>
          <span class="description-text">Usa il codice invito per partecipare a un'asta fantacalcio</span>
        </mat-panel-description>
      </mat-expansion-panel-header>
      
      <div class="expansion-content">
        <app-auction-joiner (auctionJoined)="onAuctionJoined($event)"></app-auction-joiner>
      </div>
    </mat-expansion-panel>
  </div>
</div>
